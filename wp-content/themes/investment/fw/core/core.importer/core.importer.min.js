jQuery(document).ready(function(){jQuery("#trx_importer_form").on("change","#import_posts",function(){if(jQuery(this).get(0).checked){jQuery(this).siblings(".import_posts_params").show()}else{jQuery(this).siblings(".import_posts_params").hide()}});jQuery(".trx_importer_section").on("click",'.trx_buttons input[type="button"]',function(){var c=jQuery(this).data("last_id");if(!c){c=0}var d=jQuery(this).data("last_slider");if(!d){d=0}var b=[];var a="";jQuery(this).parents("form").find('input[type="checkbox"]').each(function(){var e=jQuery(this).attr("name");if(jQuery(this).get(0).checked){a+=(a?",":"")+e.substr(7);var f={action:e,data:{}};if(e=="import_posts"){f.data.data_type=jQuery("#data_type_vc").length>0&&jQuery("#data_type_vc").get(0).checked?jQuery("#data_type_vc").val():jQuery("#data_type_no_vc").val();f.data.last_id=c}b.push(f)}else{jQuery("#trx_importer_progress ."+e).hide()}});b.unshift({action:"import_start",data:{clear_tables:a}});b.push({action:"import_end"});jQuery("#trx_importer_form").hide();jQuery("#trx_importer_progress").fadeIn();investment_importer_do_action(b,0)})});function investment_importer_do_action(b,a){if(!jQuery("#trx_importer_progress ."+b[a].action+" .import_progress_status").hasClass("step_in_progress")){jQuery("#trx_importer_progress ."+b[a].action+" .import_progress_status").addClass("step_in_progress").html("0%")}var d={ajax_nonce:INVESTMENT_STORAGE.ajax_nonce,action:"investment_importer_start_import",importer_action:b[a].action};for(var c in b[a].data){d[c]=b[a].data[c]}jQuery.post(INVESTMENT_STORAGE.ajax_url,d,function(f){var i={};try{i=JSON.parse(f)}catch(h){i={error:INVESTMENT_STORAGE.ajax_error+":<br>"+f};console.log(f)}if(i.error===""){var g=i.action;if(i.result>=100){jQuery("#trx_importer_progress ."+g+" .import_progress_status").html("");jQuery("#trx_importer_progress ."+g+" .import_progress_status").removeClass("step_in_progress").addClass("step_complete");a++}else{jQuery("#trx_importer_progress ."+g+" .import_progress_status").html(i.result+"%");if(typeof b[a].data.last_id!="undefined"){b[a].data.last_id++}}if(a<b.length){investment_importer_do_action(b,a)}else{jQuery("#trx_importer_progress").removeClass("notice-info").addClass("notice-success");jQuery(".trx_importer_progress_complete").show()}}else{jQuery("#trx_importer_progress").removeClass("notice-info").addClass("notice-error").css({paddingTop:"1em",paddingBottom:"1em"}).html(i.error)}})};